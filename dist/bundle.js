
(function(l, r) { if (l.getElementById('livereloadscript')) return; r = l.createElement('script'); r.async = 1; r.src = '//' + (window.location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1'; r.id = 'livereloadscript'; l.head.appendChild(r) })(window.document);
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global = global || self, global.Treact = factory());
}(this, (function () { 'use strict';

  const TEXT_ELEMENT = 'TEXT_ELEMENT';
  const UPDATE = 'UPDATE';
  const PLACEMENT = 'PLACEMENT';
  const DELETION = 'DELETION';

  function createElement (type, props, ...children) {
    children = children.flat();
    return {
      type,
      props: {
        ...props,
        children: children.map(child => {
          return typeof child === 'string'
            ? createTextElement(child)
            : child
        })
      }
    }
  }

  function createTextElement (text) {
    return {
      type: TEXT_ELEMENT,
      props: {
        nodeValue: text,
        children: []
      }
    }
  }

  const isProperty = key => key !== 'children' && !isEvent(key);
  const isEvent = key => key.startsWith('on');
  const isNew = (prev, next) => key => prev[key] !== next[key];
  const isGone = (prev, next) => key => !(key in next);

  /**
   *
   * @param {String} type
   */
  function createDOM (type) {
    const $dom = type === TEXT_ELEMENT
      ? document.createTextNode('')
      : document.createElement(type);

    return $dom
  }

  /**
   *
   * @param {HTMLElement} dom
   * @param {Object} oldProps
   * @param {Object} newProps
   */
  function updateDOM (dom, oldProps, newProps) {
    Object.keys(oldProps)
      .filter(isEvent)
      .filter(key => !(key in newProps) || oldProps[key] !== newProps[key])
      .forEach(key => {
        const event = key.toLowerCase().substring(2);
        dom.removeEventListener(event, oldProps[key]);
      });

    Object.keys(oldProps)
      .filter(isProperty)
      .filter(isGone(oldProps, newProps))
      .forEach(key => {
        dom[key] = '';
      });

    Object.keys(newProps)
      .filter(isEvent)
      .filter(isNew(oldProps, newProps))
      .forEach(key => {
        const event = key.toLowerCase().substring(2);
        dom.addEventListener(event, newProps[key]);
      });

    Object.keys(newProps)
      .filter(isProperty)
      .filter(isNew(oldProps, newProps))
      .forEach(key => {
        dom[key] = newProps[key];
      });
  }

  /**
   * 时间切片
   * 将每个Element切分为一个小的工作单元
   */

  /**
    * Fiber
    * {
    *  type: string
    *  props: {
    *    children: Element[]
    *  }
    *  dom: HTMLElement
    *  parent: Fiber
    *  child: Fiber
    *  sibling: Fiber
    *  alternate: Fiber
    *  effectTag: string
    * }
    */

  let unitOfWork = null; // 时间切片：当前所要进行工作的Fiber单元
  let wipRoot = null; // 保存fiber tree的根结点， work in progress root
  let deletions = [];
  let currentRoot = null; // 记录当前工作到哪个节点

  function commitRoot () {
    deletions.forEach(commitWork);
    commitWork(wipRoot.child);
    currentRoot = wipRoot;
    wipRoot = null;
  }

  /**
   * 操作节点，更新，删除，添加
   * @param {Fiber} fiber
   */
  function commitWork (fiber) {
    if (!fiber) {
      return
    }

    // 函数组件没有dom
    // 为函数组件的子元素循环查找到父节点
    let fiberParentDOM = fiber.parent;
    if (!fiberParentDOM.dom) {
      fiberParentDOM = fiberParentDOM.parent;
    }
    const parentDOM = fiberParentDOM.dom;

    // function component don't have dom
    if (fiber.effectTag === PLACEMENT && fiber.dom) {
      parentDOM.appendChild(fiber.dom);
    } else if (fiber.effectTag === UPDATE) {
      updateDOM(fiber.dom, fiber.alternate.props, fiber.props);
    } else if (fiber.effectTag === DELETION) {
      commitDeletion(fiber, parentDOM);
    }
    commitWork(fiber.child);
    commitWork(fiber.sibling);
  }

  function commitDeletion (fiber, domParent) {
    if (fiber.dom) {
      domParent.removeChild(fiber.dom);
    } else {
      commitDeletion(fiber.child, domParent);
    }
  }

  /**
   * 浏览器空闲时执行工作
   * @param {IdleDeadline} deadline
   */
  function workLoop (deadline) {
    let shouldPause = false;

    while (unitOfWork && !shouldPause) {
      unitOfWork = performUnitOfWork(unitOfWork);
      shouldPause = deadline.timeRemaining() < 20;
    }

    // 避免渲染部分UI
    if (!unitOfWork && wipRoot) {
      commitRoot();
    }

    window.requestIdleCallback(workLoop);
  }

  window.requestIdleCallback(workLoop);

  /**
   * 每一次工作处理一个Fiber元素
   * 1. 添加DOM
   * 2. 构建Fiber节点
   * 3. 返回下一个Fiber节点
   * @param {Fiber} fiber
   */
  function performUnitOfWork (fiber) {
    const isFunctionComponent = fiber.type instanceof Function;

    if (isFunctionComponent) {
      updateFunctionComponent(fiber);
    } else {
      updateHostComponent(fiber);
    }

    if (fiber.child) {
      return fiber.child
    }
    let nextFiber = fiber;
    while (nextFiber) {
      if (nextFiber.sibling) {
        return nextFiber.sibling
      }
      nextFiber = nextFiber.parent;
    }
  }

  let wipFiber = null; // 当前使用到的函数组件
  let hookIndex = 0; // 当前组件的钩子下标
  function updateFunctionComponent (fiber) {
    wipFiber = fiber;
    hookIndex = 0;
    wipFiber.hooks = [];
    const children = [fiber.type(fiber.props)];
    reconcileChildren(fiber, children);
  }

  function useState (initial) {
    const oldHook =
      wipFiber.alternate &&
      wipFiber.alternate.hooks &&
      wipFiber.alternate.hooks[hookIndex];

    const hook = {
      state: oldHook ? oldHook.state : initial,
      queue: []
    };

    // 合并执行多个 setState
    const actions = oldHook ? oldHook.queue : [];
    actions.forEach(action => {
      hook.state = action(hook.state);
    });

    const setState = action => {
      hook.queue.push(action);
      // 更新
      wipRoot = {
        dom: currentRoot.dom,
        props: currentRoot.props,
        alternate: currentRoot
      };
      unitOfWork = wipRoot;
      deletions = [];
    };

    wipFiber.hooks.push(hook);
    hookIndex++;
    return [hook.state, setState]
  }

  function updateHostComponent (fiber) {
    const { type, dom, props } = fiber;
    if (!dom) {
      fiber.dom = createDOM(type);
      updateDOM(fiber.dom, {}, props);
    }
    reconcileChildren(fiber, props.children);
  }

  /**
   *
   * @param {Fiber} wipFiber
   * @param {Element[]} elements
   */
  function reconcileChildren (wipFiber, elements) {
    let index = 0;
    let prevSibling = null;
    let oldFiber = wipFiber.alternate && wipFiber.alternate.child;

    while (index < elements.length || oldFiber != null) {
      const element = elements[index];
      const isSameType = oldFiber && element && oldFiber.type === element.type;
      let newFiber = null;

      if (isSameType) {
        newFiber = {
          type: oldFiber.type,
          props: element.props,
          dom: oldFiber.dom, // 更新同一个DOM
          parent: wipFiber,
          effectTag: UPDATE,
          alternate: oldFiber
        };
      } else if (element && !isSameType) {
        newFiber = {
          type: element.type,
          props: element.props,
          dom: null,
          parent: wipFiber,
          effectTag: PLACEMENT,
          alternate: null
        };
      } else if (oldFiber && !isSameType) {
        oldFiber.effectTag = DELETION;
        deletions.push(oldFiber);
      }

      if (oldFiber) {
        oldFiber = oldFiber.sibling;
      }

      if (index === 0) {
        wipFiber.child = newFiber;
      } else {
        prevSibling.sibling = newFiber;
      }

      prevSibling = newFiber;
      index++;
    }
  }

  function render (element, container) {
    const fiberRoot = {
      dom: container,
      props: {
        children: [element]
      },
      alternate: null
    };
    unitOfWork = fiberRoot;
    wipRoot = fiberRoot;
  }

  var index = {
    createElement,
    render,
    useState
  };

  return index;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvY29uc3RhbnRzLmpzIiwiLi4vc3JjL2NyZWF0ZUVsZW1lbnQuanMiLCIuLi9zcmMvdXRpbHMuanMiLCIuLi9zcmMvZG9tLmpzIiwiLi4vc3JjL3JlY29uY2lsZS5qcyIsIi4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgVEVYVF9FTEVNRU5UID0gJ1RFWFRfRUxFTUVOVCdcbmV4cG9ydCBjb25zdCBVUERBVEUgPSAnVVBEQVRFJ1xuZXhwb3J0IGNvbnN0IFBMQUNFTUVOVCA9ICdQTEFDRU1FTlQnXG5leHBvcnQgY29uc3QgREVMRVRJT04gPSAnREVMRVRJT04nXG4iLCJpbXBvcnQgeyBURVhUX0VMRU1FTlQgfSBmcm9tICcuL2NvbnN0YW50cydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCAodHlwZSwgcHJvcHMsIC4uLmNoaWxkcmVuKSB7XG4gIGNoaWxkcmVuID0gY2hpbGRyZW4uZmxhdCgpXG4gIHJldHVybiB7XG4gICAgdHlwZSxcbiAgICBwcm9wczoge1xuICAgICAgLi4ucHJvcHMsXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW4ubWFwKGNoaWxkID0+IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZydcbiAgICAgICAgICA/IGNyZWF0ZVRleHRFbGVtZW50KGNoaWxkKVxuICAgICAgICAgIDogY2hpbGRcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRFbGVtZW50ICh0ZXh0KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogVEVYVF9FTEVNRU5ULFxuICAgIHByb3BzOiB7XG4gICAgICBub2RlVmFsdWU6IHRleHQsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpc1Byb3BlcnR5ID0ga2V5ID0+IGtleSAhPT0gJ2NoaWxkcmVuJyAmJiAhaXNFdmVudChrZXkpXG5leHBvcnQgY29uc3QgaXNFdmVudCA9IGtleSA9PiBrZXkuc3RhcnRzV2l0aCgnb24nKVxuZXhwb3J0IGNvbnN0IGlzTmV3ID0gKHByZXYsIG5leHQpID0+IGtleSA9PiBwcmV2W2tleV0gIT09IG5leHRba2V5XVxuZXhwb3J0IGNvbnN0IGlzR29uZSA9IChwcmV2LCBuZXh0KSA9PiBrZXkgPT4gIShrZXkgaW4gbmV4dClcbiIsImltcG9ydCB7IFRFWFRfRUxFTUVOVCB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHsgaXNQcm9wZXJ0eSwgaXNOZXcsIGlzR29uZSwgaXNFdmVudCB9IGZyb20gJy4vdXRpbHMnXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVET00gKHR5cGUpIHtcbiAgY29uc3QgJGRvbSA9IHR5cGUgPT09IFRFWFRfRUxFTUVOVFxuICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpXG4gICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpXG5cbiAgcmV0dXJuICRkb21cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZG9tXG4gKiBAcGFyYW0ge09iamVjdH0gb2xkUHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZXdQcm9wc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRE9NIChkb20sIG9sZFByb3BzLCBuZXdQcm9wcykge1xuICBPYmplY3Qua2V5cyhvbGRQcm9wcylcbiAgICAuZmlsdGVyKGlzRXZlbnQpXG4gICAgLmZpbHRlcihrZXkgPT4gIShrZXkgaW4gbmV3UHJvcHMpIHx8IG9sZFByb3BzW2tleV0gIT09IG5ld1Byb3BzW2tleV0pXG4gICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0ga2V5LnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKDIpXG4gICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb2xkUHJvcHNba2V5XSlcbiAgICB9KVxuXG4gIE9iamVjdC5rZXlzKG9sZFByb3BzKVxuICAgIC5maWx0ZXIoaXNQcm9wZXJ0eSlcbiAgICAuZmlsdGVyKGlzR29uZShvbGRQcm9wcywgbmV3UHJvcHMpKVxuICAgIC5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBkb21ba2V5XSA9ICcnXG4gICAgfSlcblxuICBPYmplY3Qua2V5cyhuZXdQcm9wcylcbiAgICAuZmlsdGVyKGlzRXZlbnQpXG4gICAgLmZpbHRlcihpc05ldyhvbGRQcm9wcywgbmV3UHJvcHMpKVxuICAgIC5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGtleS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygyKVxuICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIG5ld1Byb3BzW2tleV0pXG4gICAgfSlcblxuICBPYmplY3Qua2V5cyhuZXdQcm9wcylcbiAgICAuZmlsdGVyKGlzUHJvcGVydHkpXG4gICAgLmZpbHRlcihpc05ldyhvbGRQcm9wcywgbmV3UHJvcHMpKVxuICAgIC5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBkb21ba2V5XSA9IG5ld1Byb3BzW2tleV1cbiAgICB9KVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NLCB1cGRhdGVET00gfSBmcm9tICcuL2RvbSdcbmltcG9ydCB7IFVQREFURSwgUExBQ0VNRU5ULCBERUxFVElPTiB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG4vKipcbiAqIOaXtumXtOWIh+eJh1xuICog5bCG5q+P5LiqRWxlbWVudOWIh+WIhuS4uuS4gOS4quWwj+eahOW3peS9nOWNleWFg1xuICovXG5cbi8qKlxuICAqIEZpYmVyXG4gICoge1xuICAqICB0eXBlOiBzdHJpbmdcbiAgKiAgcHJvcHM6IHtcbiAgKiAgICBjaGlsZHJlbjogRWxlbWVudFtdXG4gICogIH1cbiAgKiAgZG9tOiBIVE1MRWxlbWVudFxuICAqICBwYXJlbnQ6IEZpYmVyXG4gICogIGNoaWxkOiBGaWJlclxuICAqICBzaWJsaW5nOiBGaWJlclxuICAqICBhbHRlcm5hdGU6IEZpYmVyXG4gICogIGVmZmVjdFRhZzogc3RyaW5nXG4gICogfVxuICAqL1xuXG5sZXQgdW5pdE9mV29yayA9IG51bGwgLy8g5pe26Ze05YiH54mH77ya5b2T5YmN5omA6KaB6L+b6KGM5bel5L2c55qERmliZXLljZXlhYNcbmxldCB3aXBSb290ID0gbnVsbCAvLyDkv53lrZhmaWJlciB0cmVl55qE5qC557uT54K577yMIHdvcmsgaW4gcHJvZ3Jlc3Mgcm9vdFxubGV0IGRlbGV0aW9ucyA9IFtdXG5sZXQgY3VycmVudFJvb3QgPSBudWxsIC8vIOiusOW9leW9k+WJjeW3peS9nOWIsOWTquS4quiKgueCuVxuXG5mdW5jdGlvbiBjb21taXRSb290ICgpIHtcbiAgZGVsZXRpb25zLmZvckVhY2goY29tbWl0V29yaylcbiAgY29tbWl0V29yayh3aXBSb290LmNoaWxkKVxuICBjdXJyZW50Um9vdCA9IHdpcFJvb3RcbiAgd2lwUm9vdCA9IG51bGxcbn1cblxuLyoqXG4gKiDmk43kvZzoioLngrnvvIzmm7TmlrDvvIzliKDpmaTvvIzmt7vliqBcbiAqIEBwYXJhbSB7RmliZXJ9IGZpYmVyXG4gKi9cbmZ1bmN0aW9uIGNvbW1pdFdvcmsgKGZpYmVyKSB7XG4gIGlmICghZmliZXIpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIOWHveaVsOe7hOS7tuayoeaciWRvbVxuICAvLyDkuLrlh73mlbDnu4Tku7bnmoTlrZDlhYPntKDlvqrnjq/mn6Xmib7liLDniLboioLngrlcbiAgbGV0IGZpYmVyUGFyZW50RE9NID0gZmliZXIucGFyZW50XG4gIGlmICghZmliZXJQYXJlbnRET00uZG9tKSB7XG4gICAgZmliZXJQYXJlbnRET00gPSBmaWJlclBhcmVudERPTS5wYXJlbnRcbiAgfVxuICBjb25zdCBwYXJlbnRET00gPSBmaWJlclBhcmVudERPTS5kb21cblxuICAvLyBmdW5jdGlvbiBjb21wb25lbnQgZG9uJ3QgaGF2ZSBkb21cbiAgaWYgKGZpYmVyLmVmZmVjdFRhZyA9PT0gUExBQ0VNRU5UICYmIGZpYmVyLmRvbSkge1xuICAgIHBhcmVudERPTS5hcHBlbmRDaGlsZChmaWJlci5kb20pXG4gIH0gZWxzZSBpZiAoZmliZXIuZWZmZWN0VGFnID09PSBVUERBVEUpIHtcbiAgICB1cGRhdGVET00oZmliZXIuZG9tLCBmaWJlci5hbHRlcm5hdGUucHJvcHMsIGZpYmVyLnByb3BzKVxuICB9IGVsc2UgaWYgKGZpYmVyLmVmZmVjdFRhZyA9PT0gREVMRVRJT04pIHtcbiAgICBjb21taXREZWxldGlvbihmaWJlciwgcGFyZW50RE9NKVxuICB9XG4gIGNvbW1pdFdvcmsoZmliZXIuY2hpbGQpXG4gIGNvbW1pdFdvcmsoZmliZXIuc2libGluZylcbn1cblxuZnVuY3Rpb24gY29tbWl0RGVsZXRpb24gKGZpYmVyLCBkb21QYXJlbnQpIHtcbiAgaWYgKGZpYmVyLmRvbSkge1xuICAgIGRvbVBhcmVudC5yZW1vdmVDaGlsZChmaWJlci5kb20pXG4gIH0gZWxzZSB7XG4gICAgY29tbWl0RGVsZXRpb24oZmliZXIuY2hpbGQsIGRvbVBhcmVudClcbiAgfVxufVxuXG4vKipcbiAqIOa1j+iniOWZqOepuumXsuaXtuaJp+ihjOW3peS9nFxuICogQHBhcmFtIHtJZGxlRGVhZGxpbmV9IGRlYWRsaW5lXG4gKi9cbmZ1bmN0aW9uIHdvcmtMb29wIChkZWFkbGluZSkge1xuICBsZXQgc2hvdWxkUGF1c2UgPSBmYWxzZVxuXG4gIHdoaWxlICh1bml0T2ZXb3JrICYmICFzaG91bGRQYXVzZSkge1xuICAgIHVuaXRPZldvcmsgPSBwZXJmb3JtVW5pdE9mV29yayh1bml0T2ZXb3JrKVxuICAgIHNob3VsZFBhdXNlID0gZGVhZGxpbmUudGltZVJlbWFpbmluZygpIDwgMjBcbiAgfVxuXG4gIC8vIOmBv+WFjea4suafk+mDqOWIhlVJXG4gIGlmICghdW5pdE9mV29yayAmJiB3aXBSb290KSB7XG4gICAgY29tbWl0Um9vdCgpXG4gIH1cblxuICB3aW5kb3cucmVxdWVzdElkbGVDYWxsYmFjayh3b3JrTG9vcClcbn1cblxud2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sod29ya0xvb3ApXG5cbi8qKlxuICog5q+P5LiA5qyh5bel5L2c5aSE55CG5LiA5LiqRmliZXLlhYPntKBcbiAqIDEuIOa3u+WKoERPTVxuICogMi4g5p6E5bu6RmliZXLoioLngrlcbiAqIDMuIOi/lOWbnuS4i+S4gOS4qkZpYmVy6IqC54K5XG4gKiBAcGFyYW0ge0ZpYmVyfSBmaWJlclxuICovXG5mdW5jdGlvbiBwZXJmb3JtVW5pdE9mV29yayAoZmliZXIpIHtcbiAgY29uc3QgaXNGdW5jdGlvbkNvbXBvbmVudCA9IGZpYmVyLnR5cGUgaW5zdGFuY2VvZiBGdW5jdGlvblxuXG4gIGlmIChpc0Z1bmN0aW9uQ29tcG9uZW50KSB7XG4gICAgdXBkYXRlRnVuY3Rpb25Db21wb25lbnQoZmliZXIpXG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlSG9zdENvbXBvbmVudChmaWJlcilcbiAgfVxuXG4gIGlmIChmaWJlci5jaGlsZCkge1xuICAgIHJldHVybiBmaWJlci5jaGlsZFxuICB9XG4gIGxldCBuZXh0RmliZXIgPSBmaWJlclxuICB3aGlsZSAobmV4dEZpYmVyKSB7XG4gICAgaWYgKG5leHRGaWJlci5zaWJsaW5nKSB7XG4gICAgICByZXR1cm4gbmV4dEZpYmVyLnNpYmxpbmdcbiAgICB9XG4gICAgbmV4dEZpYmVyID0gbmV4dEZpYmVyLnBhcmVudFxuICB9XG59XG5cbmxldCB3aXBGaWJlciA9IG51bGwgLy8g5b2T5YmN5L2/55So5Yiw55qE5Ye95pWw57uE5Lu2XG5sZXQgaG9va0luZGV4ID0gMCAvLyDlvZPliY3nu4Tku7bnmoTpkqnlrZDkuIvmoIdcbmZ1bmN0aW9uIHVwZGF0ZUZ1bmN0aW9uQ29tcG9uZW50IChmaWJlcikge1xuICB3aXBGaWJlciA9IGZpYmVyXG4gIGhvb2tJbmRleCA9IDBcbiAgd2lwRmliZXIuaG9va3MgPSBbXVxuICBjb25zdCBjaGlsZHJlbiA9IFtmaWJlci50eXBlKGZpYmVyLnByb3BzKV1cbiAgcmVjb25jaWxlQ2hpbGRyZW4oZmliZXIsIGNoaWxkcmVuKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RhdGUgKGluaXRpYWwpIHtcbiAgY29uc3Qgb2xkSG9vayA9XG4gICAgd2lwRmliZXIuYWx0ZXJuYXRlICYmXG4gICAgd2lwRmliZXIuYWx0ZXJuYXRlLmhvb2tzICYmXG4gICAgd2lwRmliZXIuYWx0ZXJuYXRlLmhvb2tzW2hvb2tJbmRleF1cblxuICBjb25zdCBob29rID0ge1xuICAgIHN0YXRlOiBvbGRIb29rID8gb2xkSG9vay5zdGF0ZSA6IGluaXRpYWwsXG4gICAgcXVldWU6IFtdXG4gIH1cblxuICAvLyDlkIjlubbmiafooYzlpJrkuKogc2V0U3RhdGVcbiAgY29uc3QgYWN0aW9ucyA9IG9sZEhvb2sgPyBvbGRIb29rLnF1ZXVlIDogW11cbiAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XG4gICAgaG9vay5zdGF0ZSA9IGFjdGlvbihob29rLnN0YXRlKVxuICB9KVxuXG4gIGNvbnN0IHNldFN0YXRlID0gYWN0aW9uID0+IHtcbiAgICBob29rLnF1ZXVlLnB1c2goYWN0aW9uKVxuICAgIC8vIOabtOaWsFxuICAgIHdpcFJvb3QgPSB7XG4gICAgICBkb206IGN1cnJlbnRSb290LmRvbSxcbiAgICAgIHByb3BzOiBjdXJyZW50Um9vdC5wcm9wcyxcbiAgICAgIGFsdGVybmF0ZTogY3VycmVudFJvb3RcbiAgICB9XG4gICAgdW5pdE9mV29yayA9IHdpcFJvb3RcbiAgICBkZWxldGlvbnMgPSBbXVxuICB9XG5cbiAgd2lwRmliZXIuaG9va3MucHVzaChob29rKVxuICBob29rSW5kZXgrK1xuICByZXR1cm4gW2hvb2suc3RhdGUsIHNldFN0YXRlXVxufVxuXG5mdW5jdGlvbiB1cGRhdGVIb3N0Q29tcG9uZW50IChmaWJlcikge1xuICBjb25zdCB7IHR5cGUsIGRvbSwgcHJvcHMgfSA9IGZpYmVyXG4gIGlmICghZG9tKSB7XG4gICAgZmliZXIuZG9tID0gY3JlYXRlRE9NKHR5cGUpXG4gICAgdXBkYXRlRE9NKGZpYmVyLmRvbSwge30sIHByb3BzKVxuICB9XG4gIHJlY29uY2lsZUNoaWxkcmVuKGZpYmVyLCBwcm9wcy5jaGlsZHJlbilcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtGaWJlcn0gd2lwRmliZXJcbiAqIEBwYXJhbSB7RWxlbWVudFtdfSBlbGVtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjb25jaWxlQ2hpbGRyZW4gKHdpcEZpYmVyLCBlbGVtZW50cykge1xuICBsZXQgaW5kZXggPSAwXG4gIGxldCBwcmV2U2libGluZyA9IG51bGxcbiAgbGV0IG9sZEZpYmVyID0gd2lwRmliZXIuYWx0ZXJuYXRlICYmIHdpcEZpYmVyLmFsdGVybmF0ZS5jaGlsZFxuXG4gIHdoaWxlIChpbmRleCA8IGVsZW1lbnRzLmxlbmd0aCB8fCBvbGRGaWJlciAhPSBudWxsKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XVxuICAgIGNvbnN0IGlzU2FtZVR5cGUgPSBvbGRGaWJlciAmJiBlbGVtZW50ICYmIG9sZEZpYmVyLnR5cGUgPT09IGVsZW1lbnQudHlwZVxuICAgIGxldCBuZXdGaWJlciA9IG51bGxcblxuICAgIGlmIChpc1NhbWVUeXBlKSB7XG4gICAgICBuZXdGaWJlciA9IHtcbiAgICAgICAgdHlwZTogb2xkRmliZXIudHlwZSxcbiAgICAgICAgcHJvcHM6IGVsZW1lbnQucHJvcHMsXG4gICAgICAgIGRvbTogb2xkRmliZXIuZG9tLCAvLyDmm7TmlrDlkIzkuIDkuKpET01cbiAgICAgICAgcGFyZW50OiB3aXBGaWJlcixcbiAgICAgICAgZWZmZWN0VGFnOiBVUERBVEUsXG4gICAgICAgIGFsdGVybmF0ZTogb2xkRmliZXJcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQgJiYgIWlzU2FtZVR5cGUpIHtcbiAgICAgIG5ld0ZpYmVyID0ge1xuICAgICAgICB0eXBlOiBlbGVtZW50LnR5cGUsXG4gICAgICAgIHByb3BzOiBlbGVtZW50LnByb3BzLFxuICAgICAgICBkb206IG51bGwsXG4gICAgICAgIHBhcmVudDogd2lwRmliZXIsXG4gICAgICAgIGVmZmVjdFRhZzogUExBQ0VNRU5ULFxuICAgICAgICBhbHRlcm5hdGU6IG51bGxcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9sZEZpYmVyICYmICFpc1NhbWVUeXBlKSB7XG4gICAgICBvbGRGaWJlci5lZmZlY3RUYWcgPSBERUxFVElPTlxuICAgICAgZGVsZXRpb25zLnB1c2gob2xkRmliZXIpXG4gICAgfVxuXG4gICAgaWYgKG9sZEZpYmVyKSB7XG4gICAgICBvbGRGaWJlciA9IG9sZEZpYmVyLnNpYmxpbmdcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgIHdpcEZpYmVyLmNoaWxkID0gbmV3RmliZXJcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldlNpYmxpbmcuc2libGluZyA9IG5ld0ZpYmVyXG4gICAgfVxuXG4gICAgcHJldlNpYmxpbmcgPSBuZXdGaWJlclxuICAgIGluZGV4KytcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyIChlbGVtZW50LCBjb250YWluZXIpIHtcbiAgY29uc3QgZmliZXJSb290ID0ge1xuICAgIGRvbTogY29udGFpbmVyLFxuICAgIHByb3BzOiB7XG4gICAgICBjaGlsZHJlbjogW2VsZW1lbnRdXG4gICAgfSxcbiAgICBhbHRlcm5hdGU6IG51bGxcbiAgfVxuICB1bml0T2ZXb3JrID0gZmliZXJSb290XG4gIHdpcFJvb3QgPSBmaWJlclJvb3Rcbn1cbiIsImltcG9ydCBjcmVhdGVFbGVtZW50IGZyb20gJy4vY3JlYXRlRWxlbWVudCdcbmltcG9ydCB7IHVzZVN0YXRlLCByZW5kZXIgfSBmcm9tICcuL3JlY29uY2lsZSdcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjcmVhdGVFbGVtZW50LFxuICByZW5kZXIsXG4gIHVzZVN0YXRlXG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7RUFBTyxNQUFN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
